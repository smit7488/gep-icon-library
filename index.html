<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GEP Icon Guide</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

<script src="./script/highlight.js"></script>
    <style>
        @font-face {
            font-family: "Azo Sans Regular";
            src: url('https://assets.henryschein.com/AzoSans-Regular.woff2') format("woff2");
            font-display: block;
        }

        @font-face {
            font-family: "Azo Sans Bold";
            src: url('https://assets.henryschein.com/AzoSans-Bold.woff2') format("woff2");
            font-display: block;
        }
    </style>
    <link rel="stylesheet"
        href="https://www.henryschein.com/dist/HSUSGEPAngularJSS/browser/styles.6249c727cf0dfab50d61.css">
    <style>
        * {
            box-sizing: border-box;
        }

        code span {
            font-family: inherit !important;}

        body {
            font-family: 'Azo Sans Regular',-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            padding: 40px;
            background: #f4f4f9;
            color: #333;
            margin: 0;
        }

        .header {
            background: #002F6E;
background: -webkit-linear-gradient(90deg, rgba(0, 47, 110, 1) 0%, rgba(0, 114, 188, 1) 100%);
background: -moz-linear-gradient(90deg, rgba(0, 47, 110, 1) 0%, rgba(0, 114, 188, 1) 100%);
background: linear-gradient(90deg, rgba(0, 47, 110, 1) 0%, rgba(0, 114, 188, 1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#002F6E", endColorstr="#0072BC", GradientType=1);
            color: white;
           
            border-radius: 12px;
            margin-bottom: 40px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header h1 {
            margin: 0 0 10px 0;
        }

        .header p {
            margin: 5px 0;
            opacity: 0.9;
        }

        .header code {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 8px;
            border-radius: 4px;
        }

        .controls {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .controls label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #002F6E;
        }

        .controls input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .controls button {
            margin-top: 10px;
            padding: 10px 20px;
            background: #0072BC;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .controls button:hover {
            background: #005a96;
        }

        .error {
            background: #FEE9EA;
            color: #ED1C24;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border: 1px solid #eee;
        }
        .type-badge {
         
   color: #0072bc;
    background: #eee;
    display: inline-block;
    padding: 1px 6px;
    border-radius: 4px;
    font-size: 11px;
    margin-bottom: 1rem;
        }

        .type-badge.pictograph { background: #831A5B; color: #fff; }
        .type-badge.wireblock { background: #008996; color: #fff; }
        .type-badge.background { background: #F28B00; color: #fff; }

        /* Skeleton Loading Animation */
        @keyframes pulse {
            0% {
                background-color: #eee;
            }

            50% {
                background-color: #f5f5f5;
            }

            100% {
                background-color: #eee;
            }
        }

        .card.is-loading .label,
        .card.is-loading .preview-area,
        .card.is-loading select,
        .card.is-loading .button-group,
        .card.is-loading .code-block {
            background: #eee;
            animation: pulse 1.5s infinite ease-in-out;
            border: none;
            color: transparent !important;
        }

        .card.is-loading code {
            display: none;
        }

        .card.is-loading svg {
            display: none;
        }

        .preview-area {
            height: 120px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fafafa;
            border-radius: 8px;
            margin-bottom: 15px;
            padding: 10px;
        }

        .preview-area svg {

            width: auto;
            height: auto;
            max-width: 110px;
            max-height: 100%;

            vector-effect: non-scaling-stroke;

            display: block;
            margin: auto;
        }

        .label {
            font-weight: bold;
          margin-bottom: .5rem;
            color: #002F6E;
            display: block;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: wrap;
             word-wrap: break-word;  /* allows long words to break */
  overflow-wrap: break-word; /* modern standard */
  white-space: normal;    
  hyphens: none;          /* prevents automatic hyphen insertion */
        }

        select {
            width: 100%;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
            background: white;
            font-size: 13px;
            cursor: pointer;
         
        }

        input.filter-input {
            width: 100%;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
            background: white;
            font-size: 13px;
            cursor: pointer;
        }

        .button-group {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .download-btn {
            flex: 1;
            padding: 8px 5px;
            /* Less horizontal padding to fit two buttons */
            font-size: 11px;
            /* Slightly smaller font for the buttons */
            background: #0072bc;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .download-btn:hover {
            background: #0060A0;
        }


        .code-block {
            position: relative;
            margin-top: 15px;
            min-height: 60px;
        }

        code {
            display: block;
            background: #1e1e1e !important;
            /* color: #d4d4d4; */
            padding: 12px;
            font-size: 11px;
            border-radius: 4px;
            white-space: pre-wrap;
            font-family: ui-monospace, 
                 'Cascadia Code', 
                 'Source Code Pro', 
                 Menlo, 
                 Monaco, 
                 'Consolas', 
                 'DejaVu Sans Mono', 
                 monospace;
            line-height: 1.4;
            word-wrap: break-word;
        }
     

.copy-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: #0072BC;
    color: white;
    border: none;
    padding: 5px 10px;
    font-size: 10px;
    border-radius: 4px;
    cursor: pointer;
    z-index: 10;
    
    /* Animation & Layout */
    display: flex;
    align-items: center;
    gap: 5px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.copy-btn:hover {
    background: #005a96;
}

/* THE CHECKMARK ICON */
.checkmark-svg {
    width: 12px;
    height: 12px;
    display: none; /* Hidden until copied */
    stroke: white;
    stroke-width: 4;
    fill: none;
    stroke-dasharray: 20;
    stroke-dashoffset: 20;
}

/* SUCCESS STATE */
.copy-btn.copied {
    background-color: #28a745 !important;
    transform: scale(1.1);
    box-shadow: 0 4px 10px rgba(40, 167, 69, 0.3);
}

.copy-btn.copied .checkmark-svg {
    display: block;
    animation: drawCheck 0.4s ease forwards;
}

/* DRAWING ANIMATION */
@keyframes drawCheck {
    to {
        stroke-dashoffset: 0;
    }
}

        .loading {
            text-align: center;
            padding: 40px;
            color: #6B6F70;
        }

        /* Scrollbar styling for the master CSS block */
        #master-css-code::-webkit-scrollbar {
            width: 6px;
        }

        #master-css-code::-webkit-scrollbar-track {
            background: #2d2d2d;
        }

        #master-css-code::-webkit-scrollbar-thumb {
            background: #0072BC;
            border-radius: 3px;
        }

        .filter-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
            align-items: center;
            background: #eef2f7;
            padding: 15px;
            border-radius: 8px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            flex: 1;
            min-width: 200px;
        }

        .filter-group label {
            font-size: 11px;
            text-transform: uppercase;
            color: #002F6E;
            margin-bottom: 4px;
            font-weight: bold;
        }

        .filter-bar select {
            margin-bottom: 0;
            /* Override default select margin */
        }

.png-download-container select {
    background: #fff;
    border: 1px solid #ccc;
    font-size: 11px;
 
}

/* Full-width container for Backgrounds */
.full-width-section {
    width: 100%;
    margin-bottom: 50px;
}

.section-header {
    width: 100%;
    font-family: "Azo Sans Bold", sans-serif;
    font-size: 24px;
    color: #002F6E;
    margin: 40px 0 20px 0;
    padding-bottom: 10px;
    border-bottom: 2px solid #0072BC;
}

/* Wide card style for Backgrounds */
.card-wide {
    background: white;
    border-radius: 12px;
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.preview-area-wide {
    height: 400px; /* Much taller for full backgrounds */
    width: 100%;
    background-color: #0072BC;
    border-radius: 8px;
    /* Mask properties remain dynamic in JS */
}



        /* ==========================================================================
   GEP ICON SYSTEM - Master CSS
   ========================================================================== */

.icon {
    display: inline-block;
    width: 24px;
    height: 24px;
    fill: currentColor;   
    stroke: currentColor;
    vertical-align: middle;
    transition: color 0.2s ease; 
}

.icon-sm { width: 16px; height: 16px; }
.icon-md { width: 32px; height: 32px; }
.icon-lg { width: 48px; height: 48px; }

/* DARK BLUE */
.icon-dark-blue    { color: #002F6E; }
.icon-dark-blue-t4 { color: #8098B7; }
.icon-dark-blue-t3 { color: #B3C1D4; }
.icon-dark-blue-t2 { color: #E6EBF1; }
.icon-dark-blue-t1 { color: #F5F7F9; }

/* BLUE - Primary Corporate */
.icon-blue         { color: #0072BC; }
.icon-blue-t4      { color: #80B9DE; }
.icon-blue-t3      { color: #B3D5EB; }
.icon-blue-t2      { color: #E6F1F9; }
.icon-blue-t1      { color: #F5F9FC; }

/* LIGHT BLUE */
.icon-light-blue    { color: #3DB5E6; }
.icon-light-blue-t4 { color: #9FDBF3; }
.icon-light-blue-t3 { color: #C5E9F8; }
.icon-light-blue-t2 { color: #ECF8FD; }
.icon-light-blue-t1 { color: #F7FCFE; }

/* GREEN */
.icon-green         { color: #008996; }
.icon-green-t4      { color: #80C5CB; }
.icon-green-t3      { color: #B3DCE0; }
.icon-green-t2      { color: #E6F4F5; }
.icon-green-t1      { color: #F5FAFB; }

/* RED */
.icon-red    { color: #ED1C24; }
.icon-red-t4 { color: #F78E92; }
.icon-red-t3 { color: #FABBB0; }
.icon-red-t2 { color: #FEE9EA; }
.icon-red-t1 { color: #FFF6F6; }

/* VIOLET */
.icon-violet    { color: #831A5B; }
.icon-violet-t4 { color: #C28DAE; }
.icon-violet-t3 { color: #DABACE; }
.icon-violet-t2 { color: #F3E9EF; }
.icon-violet-t1 { color: #FAF6F8; }

/* ORANGE */
.icon-orange    { color: #F28B00; }
.icon-orange-t1 { color: #FFFAF5; }
.icon-orange-t2 { color: #FEF4E6; }
.icon-orange-t3 { color: #FBDCB3; }
.icon-orange-t4 { color: #F9C680; }

/* GRAYSCALE */
.icon-dark-gray    { color: #474F50; }
.icon-gray         { color: #6B6F70; }
.icon-light-gray-1 { color: #F7F7F6; }
.icon-light-gray-2 { color: #E6E6E6; }
.icon-black        { color: #000000; }
.icon-white        { color: #FFFFFF; }

/* Smooth scrolling for the whole page */
html {
  scroll-behavior: smooth;
}

.back-to-top {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 45px;
  height: 45px;
  background-color: #0072BC; /* Your brand blue */
  border: none;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity 0.3s, transform 0.3s;
  opacity: 0; /* Hidden by default */
  pointer-events: none;
  z-index: 1000;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

.back-to-top.show {
  opacity: 1;
  pointer-events: auto;
}

.back-to-top:hover {
  background-color: #005a96;
  transform: translateY(-3px);
}

/* Using the Mask Method for the arrow icon */
.icon-arrow {
  width: 20px;
  height: 20px;
  background-color: white; /* Color of the arrow */
  -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 4l-8 8h5v8h6v-8h5z'/%3E%3C/svg%3E") no-repeat center;
  mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 4l-8 8h5v8h6v-8h5z'/%3E%3C/svg%3E") no-repeat center;
  mask-size: contain;
}
/* Color Picker Styles */
.color-picker-container {
    position: relative;
}

.color-picker-button {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    background: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
}

.color-picker-button:hover {
    border-color: #0072BC;
}

.color-swatch {
    width: 24px;
    height: 24px;
    border-radius: 4px;
    border: 1px solid #ddd;
    flex-shrink: 0;
}

.color-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: 4px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 1000;
    max-height: 400px;
    overflow-y: auto;
    display: none;
}

.color-dropdown.open {
    display: block;
}

.color-group {
    padding: 12px;
}

.color-group-title {
    font-size: 11px;
    font-weight: bold;
    color: #002F6E;
    margin-bottom: 8px;
    text-transform: uppercase;
}

.color-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
}

.color-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 8px;
    border-radius: 4px;
    cursor: pointer;
    transition: background 0.2s;
}

.color-option:hover {
    background: #f0f0f0;
}

.color-option.selected {
    background: #E6F1F9;
    border: 2px solid #0072BC;
}

.color-option-swatch {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    border: 1px solid #ddd;
}

.color-option-label {
    font-size: 9px;
    text-align: center;
    color: #6B6F70;
    line-height: 1.2;
}
.load-more-btn {
    display: block;
    margin: 40px auto;
    padding: 12px 30px;
    background-color: #0072BC;
    color: white;
    border: none;
    border-radius: 25px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.load-more-btn:hover {
    background-color: #005a96;
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}

.load-more-btn:active {
    transform: translateY(0);
}
/* Entry animation */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Apply this class to new cards */
.animate-in {
    animation: fadeInUp 0.4s ease forwards;
}

/* Optional: Smoothly transition the grid height */
#grid, #background-list {
    transition: all 0.5s ease;
}

.no-results-container {
    text-align: center;
    padding: 60px 20px;
    background: #f8f9fa;
    border-radius: 12px;
    margin: 20px 0;
    border: 2px dashed #e6e6e6;
}

.no-results-content h3 {
    color: #002F6E;
    margin: 15px 0 5px 0;
}

.no-results-content p {
    color: #6B6F70;
    margin-bottom: 20px;
}

.reset-link {
    background: none;
    border: none;
    color: #0072BC;
    text-decoration: underline;
    font-weight: bold;
    cursor: pointer;
    padding: 0;
}

.reset-link:hover {
    color: #002F6E;
}


.full-background {position: relative !important;overflow: hidden!important;z-index: 1!important; display: flex; width: 100%; height: 100%;}     
.full-background::before {content: "" !important;position: absolute !important;top: 0!important;left: 0!important;width: 100%!important;height: 100%!important;background-color: #0072BC; /* icon-blue */opacity: .6; /* Adjust Transparency */-webkit-mask-image: url('https://assets.henryschein.com/HS_US_EN_Banner_background_Business-Concepts_Evaluate.svg')!important;mask-image: url('https://assets.henryschein.com/HS_US_EN_Banner_background_Business-Concepts_Evaluate.svg')!important;-webkit-mask-repeat: no-repeat!important;mask-repeat: no-repeat!important; -webkit-mask-position: center right!important; mask-position: center right!important; -webkit-mask-size: cover!important; mask-size: cover!important; z-index: -1!important;pointer-events: none!important;}
.full-background > .maincontent {position: relative;z-index: 2;}

pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{background:#1e1e1e;color:#dcdcdc}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-symbol{color:#569cd6}.hljs-link{color:#569cd6;text-decoration:underline}.hljs-built_in,.hljs-type{color:#4ec9b0}.hljs-class,.hljs-number{color:#b8d7a3}.hljs-meta .hljs-string,.hljs-string{color:#d69d85}.hljs-regexp,.hljs-template-tag{color:#9a5334}.hljs-formula,.hljs-function,.hljs-params,.hljs-subst,.hljs-title{color:#dcdcdc}.hljs-comment,.hljs-quote{color:#57a64a;font-style:italic}.hljs-doctag{color:#608b4e}.hljs-meta,.hljs-meta .hljs-keyword,.hljs-tag{color:#9b9b9b}.hljs-template-variable,.hljs-variable{color:#bd63c5}.hljs-attr,.hljs-attribute{color:#9cdcfe}.hljs-section{color:gold}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-bullet,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag{color:#d7ba7d}.hljs-addition{background-color:#144212;display:inline-block;width:100%}.hljs-deletion{background-color:#600;display:inline-block;width:100%}



    </style>
</head>

<body>
    <div class="header">
        <div class="full-background">
        <div class="container-lg mt-4 mb-4" style="max-width: 1400px">
        <div class="row g-3 p-5 mt-3 mb-5">
            <div class="col-12 col-sm-6 p-2 d-flex flex-column justify-content-center" style="z-index: 1">
                <h1>GEP Icon Guide &amp; Generator</h1>
                <p id="sprite-info">Loading sprite information...</p>
            </div>

            <div class="col-12 col-sm-6 p-2">
     
                   <label
                        style="font-size: 11px; text-transform: uppercase; color: #fff; margin-bottom: 5px; display: block; opacity: 0.8;">
                        Master System CSS
                    </label>
                <div class="code-block" style="margin-top: 0;">
                 
                    <button class="copy-btn" onclick="copyToClipboard('master-css-code', this)">Copy CSS</button>
                    <code id="master-css-code" style="max-height: 180px; overflow-y: auto;">/* ==========================================================================
   GEP ICON SYSTEM - Master CSS
   ========================================================================== */

.icon {
    display: inline-block;
    width: 24px;
    height: 24px;
    fill: currentColor;   
    stroke: currentColor;
    vertical-align: middle;
    transition: color 0.2s ease; 
}

.icon-sm { width: 16px; height: 16px; }
.icon-md { width: 32px; height: 32px; }
.icon-lg { width: 48px; height: 48px; }

/* DARK BLUE */
.icon-dark-blue    { color: #002F6E; }
.icon-dark-blue-t4 { color: #8098B7; }
.icon-dark-blue-t3 { color: #B3C1D4; }
.icon-dark-blue-t2 { color: #E6EBF1; }
.icon-dark-blue-t1 { color: #F5F7F9; }

/* BLUE - Primary Corporate */
.icon-blue         { color: #0072BC; }
.icon-blue-t4      { color: #80B9DE; }
.icon-blue-t3      { color: #B3D5EB; }
.icon-blue-t2      { color: #E6F1F9; }
.icon-blue-t1      { color: #F5F9FC; }

/* LIGHT BLUE */
.icon-light-blue    { color: #3DB5E6; }
.icon-light-blue-t4 { color: #9FDBF3; }
.icon-light-blue-t3 { color: #C5E9F8; }
.icon-light-blue-t2 { color: #ECF8FD; }
.icon-light-blue-t1 { color: #F7FCFE; }

/* GREEN */
.icon-green         { color: #008996; }
.icon-green-t4      { color: #80C5CB; }
.icon-green-t3      { color: #B3DCE0; }
.icon-green-t2      { color: #E6F4F5; }
.icon-green-t1      { color: #F5FAFB; }

/* RED */
.icon-red    { color: #ED1C24; }
.icon-red-t4 { color: #F78E92; }
.icon-red-t3 { color: #FABBB0; }
.icon-red-t2 { color: #FEE9EA; }
.icon-red-t1 { color: #FFF6F6; }

/* VIOLET */
.icon-violet    { color: #831A5B; }
.icon-violet-t4 { color: #C28DAE; }
.icon-violet-t3 { color: #DABACE; }
.icon-violet-t2 { color: #F3E9EF; }
.icon-violet-t1 { color: #FAF6F8; }

/* ORANGE */
.icon-orange    { color: #F28B00; }
.icon-orange-t4 { color: #FFFAF5; }
.icon-orange-t3 { color: #FEF4E6; }
.icon-orange-t2 { color: #FBDCB3; }
.icon-orange-t1 { color: #F9C680; }

/* GRAYSCALE */
.icon-dark-gray    { color: #474F50; }
.icon-gray         { color: #6B6F70; }
.icon-light-gray-1 { color: #F7F7F6; }
.icon-light-gray-2 { color: #E6E6E6; }
.icon-black        { color: #000000; }
.icon-white        { color: #FFFFFF; }</code>
                </div>
            </div>
        </div>
    </div></div></div>

    <div class="controls" hidden>
        <label for="config-file">Config File (relative to this HTML file):</label>
        <input type="text" id="config-file" value="./dist/hs-icons-master-config.json"
            placeholder="e.g., hs-icons-master-config.json">
        <button onclick="loadConfig()">Load Sprite</button>
    </div>

    <div id="error-container"></div>
    <div id="sprite-container" style="display: none;"></div>
    <div id="filter-container" class="filter-bar" style="display: none;">
        <div class="filter-group">
            <label>Search Icons</label>
            <input class="filter-input" type="text" id="search-input" placeholder="Search by name..."
                oninput="filterIcons()">
        </div>
        <div class="filter-group">
            <label>Type</label>
            <select id="type-filter" onchange="filterIcons()">
                <option value="all">All Types</option>
            </select>
        </div>
        <div class="filter-group">
            <label>Category</label>
            <select id="category-filter" onchange="filterIcons()">
                <option value="all">All Categories</option>
            </select>
        </div>
        <div class="filter-group">
    <label>Show</label>
    <select id="page-size-filter" onchange="updatePageSize()">
        <option value="20" selected>20 items</option>
        <option value="50">50 items</option>
        <option value="100">100 items</option>
        <option value="200">200 items</option>
    </select>
</div>
    </div>
    <div id="no-results" class="no-results-container" style="display: none;">
    <div class="no-results-content">
        <span style="font-size: 3rem;">üîç</span>
        <h3>No icons found</h3>
        <p>Try adjusting your search or filters to find what you're looking for.</p>
        <button onclick="resetFilters()" class="reset-link">Clear all filters</button>
    </div>
</div>
    <div id="background-section" class="full-width-section" style="display: none;">
    <h2 class="section-header">Background Patterns (Full Width)</h2>
    <div id="background-list"></div>
</div>

    <div id="grid" class="grid"></div>
    <button id="backToTop" class="back-to-top" title="Go to top">
  <span class="icon-arrow"></span>
</button>

    <script>
    let currentConfig = null;
    let spriteText = '';
    let observer = null;
    let debounceTimer;

    // 1. CALCULATE DYNAMIC BASE PATH
    const baseUrl = window.location.href.substring(0, window.location.href.lastIndexOf('/') + 1);

    function formatColorLabel(cls) {
    // Remove 'icon-' prefix
    let label = cls.replace('icon-', '');
    
    // Handle tint variations (t1, t2, t3, t4)
    const tintMatch = label.match(/-t(\d)$/);
    if (tintMatch) {
        label = label.replace(/-t\d$/, '');
        const tintNumber = tintMatch[1];
        
        // Capitalize each word
        label = label.split('-').map(word => 
            word.charAt(0).toUpperCase() + word.slice(1)
        ).join(' ');
        
        return `${label} Tint ${tintNumber}`;
    }
    
    // For non-tint colors, just capitalize
    return label.split('-').map(word => 
        word.charAt(0).toUpperCase() + word.slice(1)
    ).join(' ');
}


    // --- SYSTEM LOGIC ---
    async function loadConfig() {
        const configFile = document.getElementById('config-file').value;
        try {
            const response = await fetch(configFile);
            currentConfig = await response.json();

            if (currentConfig.spriteUrl.startsWith('.')) {
                currentConfig.spriteUrl = currentConfig.spriteUrl.replace(/^\./, baseUrl).replace(/\/+/g, '/').replace(':/', '://');
            }
            if (currentConfig.spriteFile.startsWith('.')) {
                currentConfig.spriteFile = currentConfig.spriteFile.replace(/^\./, baseUrl).replace(/\/+/g, '/').replace(':/', '://');
            }
            
            document.getElementById('sprite-info').innerHTML = `
              
                Sprite URL: <a href="${currentConfig.spriteUrl}">${currentConfig.spriteUrl}</a>
            `;

            await loadSprite();
            setupFilters();
            renderIcons();

            const masterCss = document.getElementById('master-css-code');
            if (masterCss) {
    masterCss.className = 'language-css';
    hljs.highlightElement(masterCss);
}
            
        } catch (e) { console.error("Config load failed", e); }
    }

    async function loadSprite() {
        const response = await fetch(currentConfig.spriteFile);
        spriteText = await response.text();
        document.getElementById('sprite-container').innerHTML = spriteText;
    }

    function setupFilters() {
        const types = new Set();
        const categories = new Set();
        currentConfig.icons.forEach(i => { if(i.type) types.add(i.type); if(i.category) categories.add(i.category); });
        const tSel = document.getElementById('type-filter');
        const cSel = document.getElementById('category-filter');
        types.forEach(t => {
  const cap = t.charAt(0).toUpperCase() + t.slice(1);
  tSel.innerHTML += `<option value="${t}">${cap}</option>`;
});

        categories.forEach(c => cSel.innerHTML += `<option value="${c}">${c}</option>`);
        document.getElementById('filter-container').style.display = 'flex';
    }


// --- PAGINATION STATE ---
let PAGE_SIZE = 20; // Changed from const to let
let itemsToShow = 20;
let filteredIconsGlobal = [];


function updatePageSize() {
    const selector = document.getElementById('page-size-filter');
    PAGE_SIZE = parseInt(selector.value);
    
    // Reset pagination to the new batch size
    itemsToShow = PAGE_SIZE;
    
    // Re-render the current filtered set with the new size
    renderIcons(true);
}

// Update loadConfig to initialize the global list
async function loadConfig() {
    const configFile = document.getElementById('config-file').value;
    try {
        const response = await fetch(configFile);
        currentConfig = await response.json();

        // Fix dynamic paths
        if (currentConfig.spriteUrl.startsWith('.')) {
            currentConfig.spriteUrl = currentConfig.spriteUrl.replace(/^\./, baseUrl).replace(/\/+/g, '/').replace(':/', '://');
        }
        if (currentConfig.spriteFile.startsWith('.')) {
            currentConfig.spriteFile = currentConfig.spriteFile.replace(/^\./, baseUrl).replace(/\/+/g, '/').replace(':/', '://');
        }
        
        document.getElementById('sprite-info').innerHTML = `Sprite URL: <a href="${currentConfig.spriteUrl}">${currentConfig.spriteUrl}</a>`;

        // INITIALIZE GLOBAL LIST
        filteredIconsGlobal = currentConfig.icons;

        await loadSprite();
        setupFilters();
        renderIcons(true); // Initial render

        const masterCss = document.getElementById('master-css-code');
        if (masterCss) {
            masterCss.className = 'language-css';
            hljs.highlightElement(masterCss);
        }
        
    } catch (e) { console.error("Config load failed", e); }
}

function filterIcons() {
    clearTimeout(debounceTimer);
    debounceTimer = setTimeout(() => {
        const q = document.getElementById('search-input').value.toLowerCase();
        const t = document.getElementById('type-filter').value;
        const c = document.getElementById('category-filter').value;
        
        filteredIconsGlobal = currentConfig.icons.filter(i => 
            i.id.toLowerCase().includes(q) && (t === 'all' || i.type === t) && (c === 'all' || i.category === c)
        );

        // --- NO RESULTS LOGIC ---
        const noResults = document.getElementById('no-results');
        const bgSection = document.getElementById('background-section');
        const grid = document.getElementById('grid');
        const loadMoreBtn = document.getElementById('load-more-btn');

        if (filteredIconsGlobal.length === 0) {
            noResults.style.display = 'block';
            bgSection.style.display = 'none';
            grid.style.display = 'none';
            if (loadMoreBtn) loadMoreBtn.style.display = 'none';
        } else {
            noResults.style.display = 'none';
            grid.style.display = 'grid'; // Or 'flex' depending on your CSS
            // background-section display is handled inside renderIcons()
            itemsToShow = PAGE_SIZE;
            renderIcons(true);
        }
    }, 250);
}

// Helper to clear everything
function resetFilters() {
    document.getElementById('search-input').value = '';
    document.getElementById('type-filter').value = 'all';
    document.getElementById('category-filter').value = 'all';
    filterIcons();
}

function handleLoadMore() {
    const btn = document.getElementById('load-more-btn');
    const originalText = btn.innerHTML;
    
    // Quick visual feedback
    btn.innerHTML = "Loading...";
    btn.style.opacity = "0.7";
    btn.style.pointerEvents = "none";

    // Small timeout to allow the browser to breathe before rendering
    setTimeout(() => {
        itemsToShow += PAGE_SIZE;
        renderIcons(false);
        
        btn.style.opacity = "1";
        btn.style.pointerEvents = "auto";
        // updateLoadMoreButton() will handle the text reset via renderIcons()
    }, 100);
}

function renderIcons(resetGrid = true) {
    const grid = document.getElementById('grid');
    const bgSection = document.getElementById('background-section');
    const bgList = document.getElementById('background-list');
    
    if (resetGrid) {
        grid.innerHTML = '';
        bgList.innerHTML = '';
        bgSection.style.display = 'none';
    }

    const start = resetGrid ? 0 : (itemsToShow - PAGE_SIZE);
    const batch = filteredIconsGlobal.slice(start, itemsToShow);

    batch.forEach((i, index) => {
        const card = document.createElement('div');
        const safeId = i.id.replace(/[^a-zA-Z0-9-_]/g, '_');
        card.dataset.id = i.id;
        card.id = `card-${safeId}`;

        // 1. Add the animation class
        card.classList.add('animate-in');
        
        // 2. Add staggered delay (e.g., 30ms per item)
        // This makes the 20 items "cascade" in
        card.style.animationDelay = `${index * 30}ms`;

        if (i.type === 'background') {
            bgSection.style.display = 'block';
            card.className += ' card-wide is-loading';
            bgList.appendChild(card);
        } else {
            card.className += ' card is-loading';
            grid.appendChild(card);
        }

        card.innerHTML = `<div class="preview-area"></div>`;
        loadActualContent(card, i);
    });

    updateLoadMoreButton();
}

function updateLoadMoreButton() {
    let btn = document.getElementById('load-more-btn');
    const remaining = filteredIconsGlobal.length - itemsToShow;
    const grid = document.getElementById('grid');

    if (!btn) {
        btn = document.createElement('button');
        btn.id = 'load-more-btn';
        btn.className = 'load-more-btn';
        btn.onclick = handleLoadMore;
        // Place it after the grid
        grid.parentNode.insertBefore(btn, grid.nextSibling);
    }

    if (remaining > 0) {
        btn.style.display = 'block';
        btn.innerHTML = `Load More (${remaining} remaining)`;
    } else {
        btn.style.display = 'none';
    }
}
function loadActualContent(card, item) {
    const safeId = item.id.replace(/[^a-zA-Z0-9-_]/g, '_');
    const isMask = item.type === 'background';
    const typeClass = item.type ? item.type.toLowerCase() : 'general';
    const typeDisplay = item.type ? item.type.charAt(0).toUpperCase() + item.type.slice(1) : 'General';
    
    // Store item data on card for callbacks
    card.dataset.id = item.id;
    card.dataset.currentColor = 'icon-blue';
    card.dataset.currentHex = '#0072BC';
    if (item.path) card.dataset.path = item.path;
    
    if (isMask) {
        card.innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; flex-wrap: wrap;">
                <div>
                    <span class="label" style="font-size: 1.2rem;">${item.id}</span>
                    <div class="type-badge background">Background Wireblock</div>
                </div>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <div style="width: 200px;">
                        <label style="font-size: 11px; font-weight: bold; color: #002F6E; display: block; margin-bottom: 4px;">WIREBLOCK COLOR</label>
                        ${createColorPicker(safeId, 'wireblock', 'icon-blue', 'updateMask')}
                    </div>
                    <div style="width: 200px;">
                        <label style="font-size: 11px; font-weight: bold; color: #002F6E; display: block; margin-bottom: 4px;">PREVIEW BG COLOR</label>
                        ${createColorPicker(safeId, 'background', 'icon-blue-t1', 'updateMaskBackground')}
                    </div>
                </div>
            </div>

            <div id="preview-wrapper-${safeId}" style="background-color: #F5F9FC; border-radius: 8px; padding: 0;">
                <div class="preview-area-wide" id="preview-${safeId}" 
                     style="-webkit-mask: url('https://assets.henryschein.com/${item.id}.svg') no-repeat center; 
                            mask: url('https://assets.henryschein.com/${item.id}.svg') no-repeat center; 
                            mask-size: cover; 
                            -webkit-mask-size: cover; 
                            background-color: #0072BC;">
                </div>
            </div>
            
            <div class="code-block">
                <button class="copy-btn" onclick="copyToClipboard('code-${safeId}', this)">
    <svg class="checkmark-svg" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>
    <span class="btn-text">Copy CSS</span>
</button>
                <code id="code-${safeId}"></code>
            </div>
            <button class="download-btn" style="max-width: 200px;" onclick="downloadMaskSVG('${item.id}', '${item.path}')">Download Source SVG</button>
        `;
        card.classList.remove('is-loading');
        // Re-store the data after innerHTML wipe
        card.dataset.id = item.id;
        card.dataset.path = item.path;
        card.dataset.currentColor = 'icon-blue';
        card.dataset.currentHex = '#0072BC';
        updateMask(item.id, 'icon-blue', '#0072BC', item.path);
    }
    else {
        card.innerHTML = `
            <span class="label">${item.id}</span>
            <div class="type-badge-wrapper"><div class="type-badge ${typeClass}">${typeDisplay}</div></div>
            <div class="preview-area" id="preview-${safeId}" style="color: #0072BC;">
                <svg><use href="${currentConfig.spriteUrl}#${item.id}"></use></svg>
            </div>
            
            ${createColorPicker(safeId, 'icon', 'icon-blue', 'updateIcon')}

            <div class="button-group" style="display: flex; gap: 4px; margin-top: 10px;">
                <button class="download-btn" onclick="downloadSVG('${item.id}', '${safeId}')">SVG</button>
                
                <div class="png-download-container" style="display: flex; flex: 1;">
                    <select id="size-${safeId}" style="border-radius: 4px 0 0 4px; border-right: none; padding: 4px; flex: 1;">
                        <option value="1024">1024</option>
                        <option value="512" selected>512</option>
                        <option value="256">256</option>
                        <option value="128">128</option>
                        <option value="64">64</option>
                    </select>
                    <button class="download-btn" 
                            style="background:#474F50; border-radius: 0 4px 4px 0; padding: 4px 8px; flex: 1;" 
                            onclick="downloadPNG('${item.id}', '${safeId}')">
                        PNG
                    </button>
                </div>
            </div>

            <div class="code-block">
                <button class="copy-btn" onclick="copyToClipboard('code-${safeId}', this)">
    <svg class="checkmark-svg" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>
    <span class="btn-text">Copy</span>
</button>
                <code id="code-${safeId}"></code>
            </div>
        `;
        card.classList.remove('is-loading');
        // Re-store the data after innerHTML wipe
        card.dataset.id = item.id;
        card.dataset.currentColor = 'icon-blue';
        card.dataset.currentHex = '#0072BC';
        updateIcon(item.id, 'icon-blue', '#0072BC');
    }
}

// Replace your buildColorOptions usage with this new function:

function createColorPicker(safeId, type, defaultColor = 'icon-blue', onChangeCallback) {
    const pickerId = `color-picker-${type}-${safeId}`;
    const defaultColorData = findColorData(defaultColor);
    
    return `
        <div class="color-picker-container">
            <button type="button" class="color-picker-button" onclick="toggleColorPicker('${pickerId}')">
                <span class="color-swatch" style="background-color: ${defaultColorData.hex};"></span>
                <span>${formatColorLabel(defaultColor)}</span>
                <span style="margin-left: auto;">‚ñº</span>
            </button>
            <div id="${pickerId}" class="color-dropdown">
                ${buildColorGrid(safeId, type, defaultColor, onChangeCallback)}
            </div>
        </div>
    `;
}

function findColorData(colorClass) {
    for (const [group, colors] of Object.entries(currentConfig.colors)) {
        if (colors[colorClass]) {
            return { class: colorClass, hex: colors[colorClass], group };
        }
    }
    return { class: 'icon-blue', hex: '#0072BC', group: 'Primary Blues' };
}

function buildColorGrid(safeId, type, selectedColor, onChangeCallback) {
    let html = '';
    for (const [group, colors] of Object.entries(currentConfig.colors)) {
        html += `<div class="color-group">`;
        html += `<div class="color-group-title">${group}</div>`;
        html += `<div class="color-grid">`;
        
        for (const [cls, hex] of Object.entries(colors)) {
            const label = formatColorLabel(cls);
            const isSelected = cls === selectedColor ? 'selected' : '';
            html += `
                <div class="color-option ${isSelected}" 
                     onclick="selectColor('${safeId}', '${type}', '${cls}', '${hex}', '${onChangeCallback}')">
                    <div class="color-option-swatch" style="background-color: ${hex};"></div>
                    <div class="color-option-label">${label}</div>
                </div>
            `;
        }
        
        html += `</div></div>`;
    }
    return html;
}

function toggleColorPicker(pickerId) {
    // Close all other pickers
    document.querySelectorAll('.color-dropdown').forEach(dropdown => {
        if (dropdown.id !== pickerId) {
            dropdown.classList.remove('open');
        }
    });
    
    const picker = document.getElementById(pickerId);
    picker.classList.toggle('open');
}

function selectColor(safeId, type, colorClass, hex, callbackName) {
    const pickerId = `color-picker-${type}-${safeId}`;
    const picker = document.getElementById(pickerId);
    const button = picker.previousElementSibling;
    const card = document.getElementById(`card-${safeId}`);
    
    // Update button display
    const swatch = button.querySelector('.color-swatch');
    const label = button.querySelector('span:nth-child(2)');
    swatch.style.backgroundColor = hex;
    label.textContent = formatColorLabel(colorClass);
    
    // Update selected state in grid
    picker.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('selected'));
    event.target.closest('.color-option').classList.add('selected');
    
    // Close picker
    picker.classList.remove('open');
    
    // Store current color in card dataset for downloads
    if (type === 'icon' || type === 'wireblock') {
        card.dataset.currentColor = colorClass;
        card.dataset.currentHex = hex;
    }
    
    // Execute callback
    if (callbackName === 'updateMask') {
        updateMask(card.dataset.id, colorClass, hex, card.dataset.path);
    } else if (callbackName === 'updateMaskBackground') {
        updateMaskBackground(safeId, `${colorClass}|${hex}`);
    } else if (callbackName === 'updateIcon') {
        updateIcon(card.dataset.id, colorClass, hex);
    }
}

// Close pickers when clicking outside
document.addEventListener('click', (e) => {
    if (!e.target.closest('.color-picker-container')) {
        document.querySelectorAll('.color-dropdown').forEach(dropdown => {
            dropdown.classList.remove('open');
        });
    }
});
// Add this new function to update the background wrapper color
function updateMaskBackground(safeId, colorValue) {
    const [colorClass, hex] = colorValue.split('|');
    const wrapper = document.getElementById(`preview-wrapper-${safeId}`);
    if (wrapper) {
        wrapper.style.backgroundColor = hex;
    }
}


function updateIcon(id, cls, hex) {
    const safeId = id.replace(/[^a-zA-Z0-9-_]/g, '_');
    const preview = document.getElementById(`preview-${safeId}`);
    if (preview) preview.style.color = hex;
    
    const codeElement = document.getElementById(`code-${safeId}`);
    if (codeElement) {
        const raw = `<svg class="icon ${cls}">\n  <use href="${currentConfig.spriteUrl}#${id}"></use>\n</svg>`;
        
        // Remove existing highlighting classes before re-highlighting
        codeElement.className = '';
        codeElement.removeAttribute('data-highlighted');
        codeElement.textContent = raw; 
        codeElement.className = 'language-xml';
        
        // Re-apply syntax highlighting
        if (typeof hljs !== 'undefined') {
            hljs.highlightElement(codeElement);
        }
    }
}
    function updateMask(id, colorClass, hex, path) {
    const safeId = id.replace(/[^a-zA-Z0-9-_]/g, '_');
    const preview = document.getElementById(`preview-${safeId}`);
    const codeElement = document.getElementById(`code-${safeId}`);

    // Update the visual preview area
    if (preview) {
        preview.style.backgroundColor = hex;
    }

    // Update the code block with the correct CSS
    if (codeElement) {
        const cssCode = `.full-background {position: relative !important;overflow: hidden!important;z-index: 1!important;}     
.full-background::before {content: "" !important;position: absolute !important;top: 0!important;left: 0!important;width: 100%!important;height: 100%!important;background-color: ${hex}; /* ${colorClass} */opacity: 1; /* Adjust Transparency */-webkit-mask-image: url('https://assets.henryschein.com/${safeId}.svg')!important;mask-image: url('https://assets.henryschein.com/${safeId}.svg')!important;-webkit-mask-repeat: no-repeat!important;mask-repeat: no-repeat!important; -webkit-mask-position: center right!important; mask-position: center right!important; -webkit-mask-size: cover!important; mask-size: cover!important; z-index: -1!important;pointer-events: none!important;}
.full-background > .maincontent {position: relative;z-index: 2;}`;
        
        // Remove existing highlighting before re-highlighting
        codeElement.className = '';
        codeElement.removeAttribute('data-highlighted');
        codeElement.textContent = cssCode;
        codeElement.className = 'language-css';
        
        // Re-apply syntax highlighting
        if (typeof hljs !== 'undefined') {
            hljs.highlightElement(codeElement);
        }
    }
}

function copyToClipboard(id, btn) {
    const el = document.getElementById(id);
    const textToCopy = el.innerText;

    // 1. Try the modern Navigator API
    if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(textToCopy).then(() => {
            handleCopySuccess(btn);
        }).catch(err => {
            console.error('Modern copy failed, trying fallback', err);
            fallbackCopy(textToCopy, btn);
        });
    } else {
        // 2. Fallback for non-HTTPS or older browsers
        fallbackCopy(textToCopy, btn);
    }
}

// Fallback using a hidden textarea
function fallbackCopy(text, btn) {
    const textArea = document.createElement("textarea");
    textArea.value = text;
    
    // Ensure textarea is not visible but part of the DOM
    textArea.style.position = "fixed";
    textArea.style.left = "-9999px";
    textArea.style.top = "0";
    document.body.appendChild(textArea);
    
    textArea.focus();
    textArea.select();

    try {
        const successful = document.execCommand('copy');
        if (successful) {
            handleCopySuccess(btn);
        } else {
            console.error('Fallback copy failed');
        }
    } catch (err) {
        console.error('Fallback copy error', err);
    }

    document.body.removeChild(textArea);
}

// Helper to handle the button UI change
function handleCopySuccess(btn) {
    const oldText = btn.innerText;
    btn.innerText = "Copied!";
    btn.classList.add('copied'); // Optional: add a class for CSS styling
    
    setTimeout(() => {
        btn.innerText = oldText;
        btn.classList.remove('copied');
    }, 1500);
}

    function downloadSVG(iconId, safeId) {
    if (!spriteText) return;
    
    // Get color from card dataset (FIXED - no longer uses select)
    const card = document.getElementById(`card-${safeId}`);
    const colorClass = card.dataset.currentColor || 'icon-blue';
    const colorHex = card.dataset.currentHex || '#0072BC';
    
    const match = spriteText.match(new RegExp(`<symbol[^>]*id="${iconId}"[^>]*>(.*?)</symbol>`, 's'));
    if (!match) return;

    const viewBox = match[0].match(/viewBox="([^"]*)"/)?.[1] || '0 0 110 110';
    let content = match[1]
        .replace(/fill:\s*currentColor/g, `fill:${colorHex}`)
        .replace(/stroke:\s*currentColor/g, `stroke:${colorHex}`)
        .replace(/fill="currentColor"/g, `fill="${colorHex}"`)
        .replace(/stroke="currentColor"/g, `stroke="${colorHex}"`);

    const svgString = `<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ns0="http://www.w3.org/2000/svg" xmlns:ns1="http://www.w3.org/2000/svg" viewBox="${viewBox}" width="110" height="110">
${content}
</svg>`;

    const blob = new Blob([svgString], { type: 'image/svg+xml;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `${iconId}_${colorClass}.svg`;
    a.click();
    URL.revokeObjectURL(url);
}
    // Ensure you have a way to download the raw SVG even if it's not in the sprite
function downloadMaskSVG(id, path) {
    fetch(path)
        .then(response => response.blob())
        .then(blob => {
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${id}.svg`;
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
        });
}


    function downloadPNG(iconId, safeId) {
    // Get color from card dataset (FIXED - no longer uses select)
    const card = document.getElementById(`card-${safeId}`);
    const colorClass = card.dataset.currentColor || 'icon-blue';
    const colorHex = card.dataset.currentHex || '#0072BC';

    // Get the size from the size select
    const sizeSelect = document.getElementById(`size-${safeId}`);
    const size = parseInt(sizeSelect.value) || 512;

    const match = spriteText.match(new RegExp(`<symbol[^>]*id="${iconId}"[^>]*>(.*?)</symbol>`, 's'));
    if (!match) return;

    const viewBox = match[0].match(/viewBox="([^"]*)"/)?.[1] || '0 0 110 110';
    let cleanContent = match[1]
        .replace(/<(\/?)ns[0-9]+:/g, '<$1')
        .replace(/\s+ns[0-9]+:[a-z-]+="[^"]*"/gi, '')
        .replace(/sketch:type="[^"]*"/gi, '')
        .replace(/currentColor/g, colorHex);

    const svgHeader = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="${viewBox}" width="${size}" height="${size}">${cleanContent}</svg>`;
    
    const canvas = document.createElement('canvas');
    canvas.width = size; 
    canvas.height = size;
    const ctx = canvas.getContext('2d');
    const img = new Image();

    img.onload = function() {
        ctx.clearRect(0, 0, size, size);
        ctx.drawImage(img, 0, 0, size, size);
        const a = document.createElement("a");
        a.href = canvas.toDataURL("image/png");
        a.download = `${iconId}_${size}px_${colorClass}.png`;
        a.click();
    };
    img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgHeader)));
}

    window.addEventListener('DOMContentLoaded', loadConfig);

    const backToTopButton = document.querySelector("#backToTop");

window.addEventListener("scroll", () => {
  if (window.pageYOffset > 300) {
    backToTopButton.classList.add("show");
  } else {
    backToTopButton.classList.remove("show");
  }
});

backToTopButton.addEventListener("click", () => {
  window.scrollTo(0, 0);
});
</script>

</body>

</html>